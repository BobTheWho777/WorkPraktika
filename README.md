# Руководство программиста для проекта WorkPraktika

## 1. Архитектура и структура проекта

Проект построен на базе **Spring Boot MVC** с использованием **Thymeleaf** для представлений и **JPA/Hibernate** для работы с базой данных.

Основные пакеты:
- `controller` — веб-контроллеры, обрабатывающие HTTP-запросы.
- `model` — сущности данных, описывающие таблицы БД.
- `service` — сервисы с бизнес-логикой.
- `impl` — реализации сервисов.
- `repository` — интерфейсы доступа к БД через Spring Data JPA.

---

## 2. Ключевые части кода

### 2.1. Модели (Entities)

- **User** — пользователь системы с полями: id, username, email, password, phone, роли.
- **Guest** — гость гостиницы (ФИО, телефон).
- **Room** — номер гостиницы с параметрами (номер, вместимость, статус, цена).
- **Organization** — организации с датами действия и скидками.
- **additionalService** — дополнительные услуги (название, цена).
- **Complaint** — жалобы с текстом и датой.
- **Reservation** — бронирование, связывающее гостя, номер, организацию, доп. услуги и жалобы.

Все сущности имеют стандартные геттеры/сеттеры, а связи реализованы через JPA-аннотации (`@ManyToOne`, `@ManyToMany`).

---

### 2.2. Контроллеры

Каждый контроллер отвечает за CRUD-операции над сущностью:

- Список с возможностью поиска (GET `/entity?search=...`)
- Форма создания (GET `/entity/new`)
- Сохранение (POST `/entity`)
- Форма редактирования (GET `/entity/{id}`)
- Удаление (POST `/entity/delete/{id}`)

**Основные контроллеры:**

| Контроллер                  | Описание                            |
|----------------------------|-----------------------------------|
| `UserController`            | Управление пользователями (ADMIN) |
| `GuestController`           | Управление гостями                 |
| `RoomController`            | Управление номерами                |
| `OrganizationController`    | Управление организациями           |
| `AdditionalServiceController` | Управление доп. услугами          |
| `ComplaintController`       | Управление жалобами                |
| `ReservationController`     | Управление бронированиями          |
| `GuideController`           | Статичные страницы (guide, about) |

---

### 2.3. Сервисы

- Содержат бизнес-логику и работу с репозиториями.
- Используются контроллерами для изоляции доступа к данным.

Примеры: `UserServiceImpl`, `ReservationService`, `GuestService`.

---

## 3. Основные API

Все запросы работают с HTML-формами и страницами.

| URL                           | HTTP метод | Описание                          | Контроллер                  |
|-------------------------------|------------|----------------------------------|----------------------------|
| `/additional-services`         | GET        | Список доп. услуг (+ поиск)       | AdditionalServiceController |
| `/additional-services/new`     | GET        | Форма создания доп. услуги        |                            |
| `/additional-services`         | POST       | Сохранение доп. услуги            |                            |
| `/additional-services/{id}`    | GET        | Редактирование доп. услуги        |                            |
| `/additional-services/delete/{id}` | POST   | Удаление доп. услуги              |                            |
| `/complaints`                  | GET        | Список жалоб (+ поиск)            | ComplaintController         |
| `/complaints/new`              | GET        | Форма создания жалобы             |                            |
| `/complaints`                  | POST       | Сохранение жалобы                 |                            |
| `/complaints/{id}`             | GET        | Редактирование жалобы             |                            |
| `/complaints/delete/{id}`      | POST       | Удаление жалобы                  |                            |
| `/guests`                     | GET        | Список гостей (+ поиск)            | GuestController             |
| `/guests/new`                 | GET        | Форма создания гостя              |                            |
| `/guests`                     | POST       | Сохранение гостя                  |                            |
| `/guests/{id}`                | GET        | Редактирование гостя              |                            |
| `/guests/delete/{id}`         | POST       | Удаление гостя                   |                            |
| `/organizations`              | GET        | Список организаций (+ поиск)      | OrganizationController      |
| `/organizations/new`          | GET        | Форма создания организации        |                            |
| `/organizations`              | POST       | Сохранение организации           |                            |
| `/organizations/{id}`         | GET        | Редактирование организации        |                            |
| `/organizations/delete/{id}`  | POST       | Удаление организации             |                            |
| `/rooms`                     | GET        | Список номеров (+ поиск)           | RoomController              |
| `/rooms/new`                 | GET        | Форма создания номера             |                            |
| `/rooms`                     | POST       | Сохранение номера                |                            |
| `/rooms/{id}`                | GET        | Редактирование номера             |                            |
| `/rooms/delete/{id}`         | POST       | Удаление номера                  |                            |
| `/admin/user/list`            | GET        | Список пользователей (ADMIN)      | UserController              |
| `/admin/user/update`          | GET        | Форма редактирования пользователя |                            |
| `/admin/user/update`          | POST       | Сохранение изменений пользователя |                            |
| `/admin/user/delete`          | GET        | Удаление пользователя (ADMIN)     |                            |
| `/reservations`               | GET        | Список бронирований (+ поиск)      | ReservationController       |
| `/reservations/new`           | GET        | Форма создания бронирования       |                            |
| `/reservations`               | POST       | Сохранение бронирования          |                            |
| `/reservations/{id}`          | GET        | Редактирование бронирования       |                            |
| `/reservations/delete/{id}`   | POST       | Удаление бронирования            |                            |
| `/guide`                      | GET        | Статичная страница руководства   | GuideController             |
| `/about`                      | GET        | Статичная страница «О проекте»   | GuideController             |

---

## 4. Аутентификация и безопасность

- Пользователи имеют роли: `USER` и `ADMIN`.
- Контроллеры, требующие админских прав, защищены аннотацией `@PreAuthorize("hasRole('ADMIN')")`.

---

## 5. Запуск и разработка

- Проект запускается как стандартное Spring Boot приложение.
- Для добавления новых сущностей нужно создать модель, сервис, контроллер и шаблоны.
- Используется Thymeleaf для отображения страниц.

---

Если нужно — могу помочь с примерами или документацией для конкретных модулей.
